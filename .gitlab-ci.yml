stages:
    - build
    - unit_tests

build:
    image: epitechcontent/epitest-docker
    stage: build
    script:
        - make re

server_test:
    image: epitechcontent/epitest-docker
    stage: unit_tests
    script:
        - make -C library/csv/
        - make -C Server build_tests
        - ./Server/tests_run -f

graph_test:
    image: epitechcontent/epitest-docker
    stage: unit_tests
    script:
        - make -C Graphical build_tests
        - ./Graphical/tests_run -f

csv_test:
    image: epitechcontent/epitest-docker
    stage: unit_tests
    script:
        - make -C library/csv build_tests
        - ./library/csv/tests_run -f

covering:
    image: epitechcontent/epitest-docker
    stage: unit_tests
    script:
        - make build_tests
        - gcovr -r . --exclude Server/tests --exclude AI/tests --exclude Graphical/tests --exclude library/csv/tests
